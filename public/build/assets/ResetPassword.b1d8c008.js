import{r as S,e as $,c as M,z as m,A as f,B as j,C as n,K as u,u as e,O as g,j as _,L as A,M as C,a1 as E}from"./vendor.8df7962f.js";import{o as L,c as x,b as G,d as p,r as b,e as O,m as P,A as R,f as U}from"./main.9bc4ee1d.js";import{u as D}from"./global.f0bfa203.js";import{u as N}from"./auth.803a091d.js";const z=["onSubmit"],Q={setup(F){const c=L(),y=x(),B=N(),{t:i}=G(),r=S({email:"",password:"",password_confirmation:""});D();let a=$(!1),v=$(!1);const I=M(()=>({email:{required:p.withMessage(i("validation.required"),b),email:p.withMessage(i("validation.email_incorrect"),O)},password:{required:p.withMessage(i("validation.required"),b),minLength:p.withMessage(i("validation.password_min_length",{count:8}),P(8))},password_confirmation:{sameAsPassword:p.withMessage(i("validation.password_incorrect"),R(r.password))}})),s=U(I,r);async function V(l){if(s.value.$touch(),!s.value.$invalid){let o={email:r.email,password:r.password,password_confirmation:r.password_confirmation,token:c.params.token};v.value=!0;let d=B.resetPassword(o,c.params.company);v.value=!1,d.data&&y.push({name:"customer.login"})}}return(l,o)=>{const d=m("BaseInput"),w=m("BaseInputGroup"),k=m("EyeOffIcon"),h=m("EyeIcon"),q=m("BaseButton");return f(),j("form",{id:"loginForm",onSubmit:E(V,["prevent"])},[n(w,{error:e(s).email.$error&&e(s).email.$errors[0].$message,label:l.$t("login.email"),class:"mb-4",required:""},{default:u(()=>[n(d,{modelValue:e(r).email,"onUpdate:modelValue":o[0]||(o[0]=t=>e(r).email=t),type:"email",name:"email",invalid:e(s).email.$error,onInput:o[1]||(o[1]=t=>e(s).email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),n(w,{error:e(s).password.$error&&e(s).password.$errors[0].$message,label:l.$t("login.password"),class:"mb-4",required:""},{default:u(()=>[n(d,{modelValue:e(r).password,"onUpdate:modelValue":o[4]||(o[4]=t=>e(r).password=t),type:e(a)?"text":"password",name:"password",invalid:e(s).password.$error,onInput:o[5]||(o[5]=t=>e(s).password.$touch())},{right:u(()=>[e(a)?(f(),g(k,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:o[2]||(o[2]=t=>_(a)?a.value=!e(a):a=!e(a))})):(f(),g(h,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:o[3]||(o[3]=t=>_(a)?a.value=!e(a):a=!e(a))}))]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["error","label"]),n(w,{error:e(s).password_confirmation.$error&&e(s).password_confirmation.$errors[0].$message,label:l.$t("login.retype_password"),class:"mb-4",required:""},{default:u(()=>[n(d,{modelValue:e(r).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=t=>e(r).password_confirmation=t),type:"password",name:"password",invalid:e(s).password_confirmation.$error,onInput:o[7]||(o[7]=t=>e(s).password_confirmation.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),n(q,{type:"submit",variant:"primary"},{default:u(()=>[A(C(l.$t("login.reset_password")),1)]),_:1})],40,z)}}};export{Q as default};
